<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>OCL CD Tool Demonstration</title>
    <script src="https://cjrtnc.leaningtech.com/loader.js"></script>
</head>
<body>
    <textarea id ='ocl' rows="8" cols="50" placeholder="OCL code here">package ocl;

import cd.MontiArc.*;
import cd.DefaultTypes.*;

ocl exampleWithTypes {
  context Cmp cmp inv:
    let
        List<Port> ports = cmp.ports;
        List<List<Port> > ports2 = List{ports};
        int i = 0;
    in
        forall Port p2 in ports :
                true;
}</textarea>
    <br />
    <textarea id ='cd' rows="8" cols="50" placeholder="CD code here">package cd;

classdiagram MontiArc {

  public class CTDef {
    String cType;
  }

  public class SubDef {
    String name;
  }

  public class Cmp {}

  
  public interface PortDef {
    String name;
    Type type;
  } 

  public class InPortDef implements PortDef {}
  public class OutPortDef implements PortDef {}
  
  public interface Port { 
    String name;
    Type type;
  } 

  public class InPort implements Port {}
  public class OutPort implements Port {}

  
  public class ConDef {}
  public class EffDef {}
  public class Con {}
  public class Eff {}
  
  
  association [1..*] Cmp (instances) <-> (def) CTDef [1];
  association [1..*] Port (instances) <-> (def) PortDef [1];
  association [1..*] Con (instances) <-> (def) ConDef [1];
  association [1..*] Eff (instances) <-> (def) EffDef [1];
  
  association [1] CTDef (parentDefs) <-> (subDefs) SubDef [*];
  association sct SubDef -> CTDef [1];
  
  association [0..1] Cmp (parent) <-> (subs) Cmp [*];
  
  association ports [1] Cmp -> Port [*];
  association comp [*] Port -> Cmp [1];
  association portDefs [1] CTDef -> PortDef [*];
  association compDef [*] PortDef -> CTDef [1];

  association srcDef [1] ConDef -> PortDef [1]; 
  association tgtDef [1] ConDef -> PortDef [1];  
  association srcDef [1] EffDef -> PortDef [1]; 
  association tgtDef [1] EffDef -> PortDef [1];   
  
  association src [1] Con -> Port [1]; 
  association tgt [1] Con -> Port [1];  
  association src [1] Eff -> Port [1]; 
  association tgt [1] Eff -> Port [1]; 
}</textarea>
    <br />
    <button onclick="check();" href="javascript:;">Check</button>
    <br />
    <textarea id ='console' rows="8" cols="50" placeholder="console tool output"></textarea>

<script>
  cheerpjInit();
  cheerpjCreateDisplay(800,600);
  function check(){
      var oclString = document.getElementById('ocl');
      var cdString = document.getElementById('cd');
      cheerpjRunMain("ocl.monticoreocl.ocl.OCLCDTool", "/apps/OCL/ocl-0.0.8-SNAPSHOT-jar-with-dependencies.jar", "-ocl", oclString, "-cd", cdString);
  }
 </script>
</body>
</html>

